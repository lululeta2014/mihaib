<link rel="import" href="../../bower_components/polymer/polymer.html">

<script>
function slowProduct(x, y) {
  x = parseInt(x) || 0;
  y = parseInt(y) || 0;
  var s = 0;
  while (y > 0 && y--) {
    s += x;
  }
  return s;
}
</script>

<polymer-element name="mul-simple">
  <template>
    This is the simple element.
    <br>
    <label for="xInput">X =</label>
    <input id="xInput" type="text" value="{{x}}">
    <br>
    <label for="yInput">Y =</label>
    <input id="yInput" type="text" value="{{y}}">
    <br>
    {{x}} × {{y}} = {{product}}

    <br>
    <label for="anyInput">This field doesn't influence the computation:</label>
    <input id="anyInput" type="text" value="{{any}}">
    <br>
    You've entered {{any}}.
  </template>
  <script>
    Polymer('mul-simple', {
        x: 512345,
        y: 156789,
        get product() {
          console.log('Simple element: computing product');
          return slowProduct(this.x, this.y);
        },
        any: 'whatever'
    });
  </script>
</polymer-element>


<polymer-element name="mul-complicated">
  <template>
    This is the complicated element.
    <br>
    It only recomputes the product when X or Y change,
    but you have to do manual dependency management.
    <br>
    <label for="xInput">X =</label>
    <input id="xInput" type="text" value="{{x}}">
    <br>
    <label for="yInput">Y =</label>
    <input id="yInput" type="text" value="{{y}}">
    <br>
    {{x}} × {{y}} = {{product}}

    <br>
    <label for="anyInput">This field doesn't influence the computation:</label>
    <input id="anyInput" type="text" value="{{any}}">
    <br>
    You've entered {{any}}.
  </template>
  <script>
    Polymer('mul-complicated', {
        x: 512345,
        y: 156789,
        product: 0,

        xChanged: function() {
          this.computeProduct();
        },
        yChanged: function() {
          this.computeProduct();
        },
        computeProduct: function() {
          console.log('Complicated element: start recomputing product');
          this.product = slowProduct(this.x, this.y);
          console.log('Complicated element: done');
        },
        any: 'whatever',

        ready: function() {
          this.computeProduct();
        }
    });
  </script>
</polymer-element>
